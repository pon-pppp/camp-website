<!DOCTYPE html>
    <html lang="ja">
    <head>
      <meta charset="UTF-8">
      <title>„Éù„Ç±„É¢„É≥È≥¥„ÅçÂ£∞„ÇØ„Ç§„Ç∫</title>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
      <style>
        #options button {
          margin: 5px;
        }
        h1 {
          text-align: center;
        }
      </style>
    </head>
    <body>
    <main class="container">
      <h1>„Éù„Ç±„É¢„É≥È≥¥„ÅçÂ£∞„ÇØ„Ç§„Ç∫</h1>
      <button id="playCry">È≥¥„ÅçÂ£∞„ÇíËÅû„Åè</button>
      <div id="options"></div>
      <div id="result"></div>
      <audio id="pokemonCry"></audio>
    </main>
    
    <script>
    async function getPokemonData(id) {
      // „Éù„Ç±„É¢„É≥„ÅÆÂü∫Êú¨ÊÉÖÂ†±
      const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
      const data = await res.json();
    
      // „Éù„Ç±„É¢„É≥„ÅÆÁ®ÆÊóèÊÉÖÂ†±ÔºàÊó•Êú¨Ë™ûÂêç„ÉªÈ≥¥„ÅçÂ£∞Ôºâ
      const speciesRes = await fetch(data.species.url);
      const speciesData = await speciesRes.json();
    
      // Êó•Êú¨Ë™ûÂêçÂèñÂæó
      const nameJa = speciesData.names.find(n => n.language.name === 'ja').name;
    
      // È≥¥„ÅçÂ£∞URLÔºàÂ≠òÂú®„Åó„Å™„ÅÑÂ†¥Âêà„ÇÇ„ÅÇ„ÇãÔºâ
      let cryUrl = null;
      if (speciesData.cry) {  // ‰ªÆ„Å´API„Å´cry„Åå„ÅÇ„Çå„Å∞
        cryUrl = speciesData.cry; 
      }
    
      return {
        id: id,
        name: nameJa,
        cry: cryUrl || `https://play.pokemonshowdown.com/audio/cries/${data.name}.mp3`
      };
    }
    
    function shuffleArray(array) {
      return array.sort(() => Math.random() - 0.5);
    }
    
    async function createQuiz() {
      const correctId = Math.floor(Math.random() * 898) + 1;
      const correctPokemon = await getPokemonData(correctId);
    
      // „ÉÄ„Éü„Éº3Âåπ„Çí„É©„É≥„ÉÄ„É†„ÅßÈÅ∏„Å∂
      const dummies = [];
      while (dummies.length < 3) {
        let id = Math.floor(Math.random() * 898) + 1;
        if (id !== correctId && !dummies.includes(id)) dummies.push(id);
      }
      const dummyData = await Promise.all(dummies.map(getPokemonData));
    
      // ÈÅ∏ÊäûËÇ¢„Çí„Ç∑„É£„ÉÉ„Éï„É´
      const options = shuffleArray([correctPokemon, ...dummyData]);
    
     // „Éú„Çø„É≥ÁîüÊàê
  const optionsDiv = document.getElementById('options');
  optionsDiv.innerHTML = '';
  options.forEach(p => {
    const btn = document.createElement('button');
    btn.textContent = p.name;
    btn.onclick = () => {
      const resultDiv = document.getElementById('result');
      if (p.name === correctPokemon.name) {
        resultDiv.textContent = 'Ê≠£Ëß£ÔºÅüéâ';
      } else {
        resultDiv.textContent = `‰∏çÊ≠£Ëß£‚Ä¶ Ê≠£Ëß£„ÅØ ${correctPokemon.name} „Åß„Åô„ÄÇ`;
      }
    };
    optionsDiv.appendChild(btn);
  });
    
      // È≥¥„ÅçÂ£∞ÂÜçÁîü„Éú„Çø„É≥Ë®≠ÂÆö
      const cryAudio = document.getElementById('pokemonCry');
      cryAudio.src = correctPokemon.cry;
    
      document.getElementById('playCry').onclick = () => {
        cryAudio.play();
      };
    }
    
    createQuiz();
    </script>
    </body>
    </html>
    